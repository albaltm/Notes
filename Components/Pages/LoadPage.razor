@page "/"
@using AppNotes.Components.Layout
@using Firebase.Database
@inherits Global
@inject NavigationManager NavigationManager
@inject Microsoft.JSInterop.IJSRuntime JSRuntime
@layout EmptyLayout

@code {

    protected async override void OnInitialized()
    {
        var token = await JSRuntime.InvokeAsync<string>("localStorage.getItem", "token");
        if (string.IsNullOrWhiteSpace(token))
        {
            NavigationManager.NavigateTo("/login");
        }
        else
        {
            if (token.Equals("guest"))
            {
                Guest = true;
            }
            else
            {
                Guest = false;
            }
            NavigationManager.NavigateTo("/library");
        }
    }
}